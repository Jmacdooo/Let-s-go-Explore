<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>My Forever Dog ‚Äî National Parks Road Trip</title>
<style>
  :root { --panel: rgba(255,255,255,.90); --shadow: 0 10px 30px rgba(0,0,0,.15); }
  body { margin:0; overflow:hidden; background:#dff2ff; font-family: system-ui, -apple-system, Segoe UI, Arial, sans-serif; }
  canvas { display:block; width:100vw; height:100vh; }

  /* Top Left Controls */
  #topbar {
    position: fixed; left: 12px; top: 12px;
    display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    background: var(--panel);
    padding:10px 12px; border-radius:14px; box-shadow: var(--shadow);
    z-index: 10;
  }
  .btn {
    padding:10px 12px; border-radius:12px; border:none; cursor:pointer;
    background:#ffb703; font-weight:700;
  }
  .btn.secondary { background:#90e0ef; }
  .btn.ghost { background:#eee; }
  .btn:active { transform: translateY(1px); }

  /* Right HUD */
  #hud {
    position: fixed; right: 12px; top: 12px;
    width: 320px; max-width: calc(100vw - 24px);
    background: var(--panel); padding: 12px; border-radius: 14px; box-shadow: var(--shadow);
    z-index: 10;
  }
  #hud h3 { margin:0 0 6px 0; font-size: 16px; }
  #hud small { color:#333; }
  #progress { margin-top: 8px; font-size: 13px; line-height: 1.35; max-height: 210px; overflow:auto; }

  /* Bottom Toast */
  #toast {
    position: fixed; left: 50%; bottom: 16px; transform: translateX(-50%);
    background: rgba(255,255,255,.92);
    padding: 10px 14px; border-radius: 14px; box-shadow: var(--shadow);
    font-weight: 700;
    opacity: 0; transition: opacity .2s ease;
    z-index: 10;
    max-width: calc(100vw - 28px);
    white-space: nowrap; overflow:hidden; text-overflow: ellipsis;
  }
  #toast.show { opacity: 1; }

  /* Panels */
  .panelOverlay {
    position: fixed; inset: 0; background: rgba(0,0,0,.35);
    display:none; align-items:center; justify-content:center;
    z-index: 20;
    padding: 14px;
  }
  .panelOverlay.show { display:flex; }
  .panel {
    width: min(980px, 100%);
    background: rgba(255,255,255,.95);
    border-radius: 18px;
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .panelHeader {
    display:flex; align-items:center; justify-content:space-between;
    padding: 12px 14px;
    background: #f6f7fb;
    border-bottom: 1px solid rgba(0,0,0,.08);
  }
  .panelHeader h2 { margin:0; font-size: 18px; }
  .panelBody { padding: 12px 14px; }

  /* Map grid */
  .grid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
  }
  .card {
    background: #fff;
    border-radius: 16px;
    overflow:hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,.10);
    cursor:pointer;
    border: 2px solid transparent;
  }
  .card:hover { border-color: rgba(0,0,0,.08); }
  .thumb {
    height: 110px;
    background: linear-gradient(135deg, rgba(144,224,239,.9), rgba(255,183,3,.35));
    display:flex; align-items:center; justify-content:center;
    font-size: 32px;
  }
  .meta { padding: 10px 12px; }
  .meta b { display:block; font-size: 14px; }
  .meta span { font-size: 12px; color:#333; }
  .badge { display:inline-flex; gap:6px; align-items:center; margin-top:6px; font-size: 12px; }
  .pill { padding: 4px 8px; background:#f2f2f2; border-radius: 999px; font-weight:700; }

  /* Passport */
  .passportGrid {
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 10px;
  }
  .stamp {
    border-radius: 14px;
    padding: 10px 12px;
    background: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,.08);
    border: 2px dashed rgba(0,0,0,.15);
  }
  .stamp .row { display:flex; justify-content:space-between; align-items:center; }
  .stamp b { font-size: 13px; }
  .stamp small { color:#333; }
  .stamp .big { font-size: 22px; margin-top: 6px; }

  /* Mobile */
  @media (max-width: 520px) {
    #hud { width: 280px; }
    .btn { padding: 10px 10px; }
  }
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="topbar">
  <button class="btn" id="leftBtn">‚¨Ö Walk</button>
  <button class="btn ghost" id="stopBtn">‚è∏ Stop</button>
  <button class="btn" id="rightBtn">Walk ‚û°</button>
  <button class="btn secondary" id="petBtn">‚ù§Ô∏è Pet</button>
  <button class="btn secondary" id="feedBtn">üçñ Feed</button>
  <button class="btn" id="mapBtn">üó∫ Park Map</button>
  <button class="btn" id="passportBtn">üìò Passport</button>
</div>

<div id="hud">
  <h3>Road Trip Progress: <span id="count">0</span>/10</h3>
  <small>Walk to landmarks or use the map to travel.</small>
  <div id="progress"></div>
</div>

<div id="toast"></div>

<!-- Map Panel -->
<div class="panelOverlay" id="mapOverlay">
  <div class="panel">
    <div class="panelHeader">
      <h2>üó∫ National Parks Map</h2>
      <button class="btn ghost" id="closeMapBtn">Close</button>
    </div>
    <div class="panelBody">
      <div class="grid" id="mapGrid"></div>
    </div>
  </div>
</div>

<!-- Passport Panel -->
<div class="panelOverlay" id="passportOverlay">
  <div class="panel">
    <div class="panelHeader">
      <h2>üìò Road Trip Passport</h2>
      <button class="btn ghost" id="closePassportBtn">Close</button>
    </div>
    <div class="panelBody">
      <div class="passportGrid" id="passportGrid"></div>
    </div>
  </div>
</div>

<script>
/* ============================================
   MY FOREVER DOG ‚Äî NATIONAL PARKS ROAD TRIP
   ============================================ */

// ---------- Canvas ----------
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = Math.floor(window.innerWidth*devicePixelRatio);
  canvas.height = Math.floor(window.innerHeight*devicePixelRatio);
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
window.addEventListener("resize", resize);
resize();

// ---------- Helpers ----------
const clamp = (v,a,b)=>Math.max(a,Math.min(b,v));
const dist  = (x1,y1,x2,y2)=>Math.hypot(x1-x2,y1-y2);

// ---------- World Layout ----------
// üìç EDIT THESE TO CHANGE DOG / SIGN HEIGHT
const PATH_Y = 760;             // sign + park label height
const DOG_GROUND_Y = 960;       // ground line (paws sit here)
const DOG_TARGET_HEIGHT = 420;  // DOG SIZE (change this for big/small)

const WORLD_W = 5200;
const WORLD_H = 1400;

const camera = { x:0, y:0 };
function centerCameraOn(wx,wy){
  camera.x = clamp(wx - window.innerWidth/2, 0, WORLD_W - window.innerWidth);
  camera.y = clamp(wy - window.innerHeight/2, 0, WORLD_H - window.innerHeight);
}

// ---------- Assets ----------
const DOG_WALK_FRAMES = 5;
const images = {};
const BASES = ["assets/","./assets/","../assets/"];

function loadImageSmart(key,file){
  return new Promise(res=>{
    let i=0;
    function next(){
      if(i>=BASES.length){console.warn("ERR",file);res(false);return;}
      const img=new Image(); const src=BASES[i++]+file;
      img.onload=()=>{images[key]=img;res(true);};
      img.onerror=next; img.src=src;
    } next();
  });
}

(async()=>{
  await loadImageSmart("walk","dog_walk.png");
  await loadImageSmart("idle","dog_idle.png");
  await loadImageSmart("eat","dog_eat.png");
  await loadImageSmart("paw","dog_paw.png");
  await loadImageSmart("sleep","dog_sleep.png");
})();

// ---------- Parks ----------
const parks = [
  {id:"yosemite",    x:320,  y:PATH_Y, emoji:"‚õ∞Ô∏è",  name:"Yosemite",      sub:"Half Dome",          a:"üêª A bear sniffs the air‚Ä¶" },
  {id:"grandcanyon", x:820,  y:PATH_Y, emoji:"üß°",  name:"Grand Canyon",  sub:"South Rim View",     a:"ü¶Ö A condor glides overhead!" },
  {id:"zion",        x:1320, y:PATH_Y, emoji:"ü™®",  name:"Zion",           sub:"Angels Landing",     a:"ü¶è A bighorn sheep poses." },
  {id:"arches",      x:1820, y:PATH_Y, emoji:"üåÖ",  name:"Arches",         sub:"Delicate Arch",      a:"ü¶ä A fox darts by!" },
  {id:"yellowstone", x:2320, y:PATH_Y, emoji:"üí¶",  name:"Yellowstone",    sub:"Old Faithful",       a:"ü¶¨ A bison keeps its distance." },
  {id:"tetons",      x:2820, y:PATH_Y, emoji:"üèîÔ∏è",  name:"Grand Teton",    sub:"Teton Range",        a:"ü´é A moose munches leaves." },
  {id:"glacier",     x:3320, y:PATH_Y, emoji:"‚ùÑÔ∏è",  name:"Glacier",        sub:"Sun Road",           a:"üêê A mountain goat climbs!" },
  {id:"rockymtn",    x:3820, y:PATH_Y, emoji:"üå≤",  name:"Rocky Mountain", sub:"Trail Ridge Road",   a:"ü¶å An elk bugles!" },
  {id:"acadia",      x:4320, y:PATH_Y, emoji:"üåä",  name:"Acadia",         sub:"Cadillac Mountain",  a:"ü¶≠ A seal splashes happily!" },
  {id:"everglades",  x:4820, y:PATH_Y, emoji:"üêä",  name:"Everglades",     sub:"Alligator Alley",    a:"üêä An alligator watches (far away)." }
];

const visited = new Set();

// ---------- Dog ----------
const dog={
  x:240,
  y:DOG_GROUND_Y-DOG_TARGET_HEIGHT,  // top of sprite
  dir:1,
  speed:3.4,
  state:"idle", // idle | walk | eat | paw | sleep
  timer:0,
  anim:0
};

let autoWalk=false;
let autoX=null;

// ---------- UI Buttons ----------
const btn = id=>document.getElementById(id);

btn("leftBtn").onclick = ()=>{stopAuto(); dog.state="walk"; dog.dir=-1;};
btn("rightBtn").onclick= ()=>{stopAuto(); dog.state="walk"; dog.dir=1;};
btn("stopBtn").onclick = ()=>{stopAuto(); dog.state="idle";};

btn("petBtn").onclick  = ()=>{stopAuto(); mood("paw",140,"‚ù§Ô∏è Your dog feels loved!");};
btn("feedBtn").onclick = ()=>{stopAuto(); mood("eat",160,"üçñ Yum!");};

btn("mapBtn").onclick      = ()=>openMap();
btn("passportBtn").onclick = ()=>openPass();

function stopAuto(){autoWalk=false; autoX=null;}

window.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft") btn("leftBtn").onclick();
  if(e.key==="ArrowRight")btn("rightBtn").onclick();
  if(e.key===" ")         btn("stopBtn").onclick();
});

// ---------- HUD / Toast ----------
const toastEl=document.getElementById("toast");
let toastT=0;
function toast(msg){toastEl.textContent=msg;toastEl.classList.add("show");toastT=220;}
function mood(s,t,m){dog.state=s;dog.timer=t;if(m)toast(m);}

// ---------- MAP / PASSPORT ----------
const mapOverlay=document.getElementById("mapOverlay");
const passOverlay=document.getElementById("passportOverlay");

function openMap(){buildMap();mapOverlay.classList.add("show");}
function openPass(){buildPass();passOverlay.classList.add("show");}
document.getElementById("closeMapBtn").onclick      =()=>mapOverlay.classList.remove("show");
document.getElementById("closePassportBtn").onclick =()=>passOverlay.classList.remove("show");

// Map builder
function buildMap(){
  const g=document.getElementById("mapGrid"); g.innerHTML="";
  parks.forEach(p=>{
    const card=document.createElement("div"); card.className="card";
    card.onclick=()=>{travel(p)};
    card.innerHTML=`<div class="thumb">${p.emoji}</div>
      <div class="meta"><b>${p.name}</b><span>${p.sub}</span></div>`;
    g.appendChild(card);
  });
}

// Passport
function buildPass(){
  const g=document.getElementById("passportGrid"); g.innerHTML="";
  parks.forEach(p=>{
    const ok=visited.has(p.id);
    g.innerHTML+=`<div class="stamp">
      <b>${p.name}</b> ‚Äî ${ok?"üü¢ STAMPED":"‚ö™ EMPTY"}
      <div>${ok?"üü¢":"‚ö™"} ${p.emoji}</div>
    </div>`;
  });
}

// ---------- Travel via path ----------
function travel(p){
  autoWalk=true;
  autoX=p.x-110;
  dog.state="walk";
  dog.dir=(autoX >= dog.x)?1:-1;
  toast(`üß≥ Traveling to ${p.name}...`);
}

// ---------- Update ----------
function update(){
  if(autoWalk){
    if(Math.abs(autoX-dog.x)<=dog.speed){
      dog.x=autoX; autoWalk=false; mood("paw",120,"Arrived! üéâ");
    } else {
      dog.x+=dog.speed*(dog.dir);
    }
  } else {
    if(dog.state==="walk") dog.x+=dog.speed*(dog.dir);
  }

  dog.x=clamp(dog.x,0,WORLD_W-200);
  dog.y = DOG_GROUND_Y-DOG_TARGET_HEIGHT;

  if(dog.timer>0) dog.timer--;
  if(dog.timer===0 && !autoWalk && dog.state!=="walk") dog.state="idle";

  dog.anim++;
  centerCameraOn(dog.x+DOG_TARGET_HEIGHT/3, dog.y+DOG_TARGET_HEIGHT/2);

  checkPark();
  if(toastT>0) toastT--; else toastEl.classList.remove("show");
}

// ---------- Park Discovery ----------
function checkPark(){
  for(const p of parks){
    const d=dist(dog.x+80,dog.y+200,p.x,p.y);
    if(d<120 && !visited.has(p.id)){
      visited.add(p.id);
      toast(`‚ú® ${p.name}: ${p.a}`);
    }
  }
}

// ---------- Draw Background / Signs ----------
function drawBG(){
  ctx.fillStyle="#dff2ff"; ctx.fillRect(0,0,window.innerWidth,window.innerHeight);

  const gY = DOG_GROUND_Y-camera.y;
  ctx.fillStyle="#8ecae6"; ctx.fillRect(-camera.x,gY, WORLD_W,500);
}

function drawSigns(){
  parks.forEach(p=>{
    const sx=p.x-camera.x, sy=p.y-camera.y;
    ctx.fillStyle="rgba(255,255,255,.9)";
    ctx.fillRect(sx-110,sy-20,220,48);
    ctx.fillStyle="#000"; ctx.font="14px system-ui";
    ctx.fillText(p.name,sx-100,sy+0);
    ctx.font="12px system-ui";
    ctx.fillText(p.sub,sx-100,sy+18);
  });
}

// ---------- Draw Dog ----------
function drawDog(){
  const sx=dog.x-camera.x, sy=dog.y-camera.y;
  let key = (dog.state==="walk")?"walk":dog.state;
  key = key in images ? key : "idle";
  const img=images[key];
  if(!img){ctx.fillStyle="brown";ctx.fillRect(sx,sy,120,100);return;}

  const frames=(key==="walk")?DOG_WALK_FRAMES:1;
  const fw=img.width/frames, fh=img.height;
  const scale = DOG_TARGET_HEIGHT/fh;
  const dw=fw*scale, dh=DOG_TARGET_HEIGHT;

  let f=0;
  if(frames>1) f=Math.floor(dog.anim/6)%frames;

  ctx.save();
  if(dog.dir===-1){ctx.translate(sx+dw,sy);ctx.scale(-1,1);}
  else{ctx.translate(sx,sy);}
  ctx.drawImage(img,f*fw,0,fw,fh,0,0,dw,dh);
  ctx.restore();
}

// ---------- Loop ----------
function draw(){drawBG();drawSigns();drawDog();}
function tick(){update();draw();requestAnimationFrame(tick);}
tick();

toast("üê∂ Welcome! BIG dog edition üéâ");
</script>





</body>
</html>
