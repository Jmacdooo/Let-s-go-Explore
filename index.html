<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Forever Dog ‚Äî Parks</title>
<style>
  body{
    margin:0;
    background:#bde0fe;
    overflow:hidden;
    font-family: system-ui, -apple-system, sans-serif;
  }
  canvas{
    display:block;
    width:100vw;
    height:100vh;
  }
  #controls{
    position:fixed;
    left:10px;
    top:10px;
    z-index:10;
    background:rgba(255,255,255,.9);
    padding:8px 10px;
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,.2);
  }
  button{
    padding:8px 10px;
    margin:2px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    font-weight:600;
    background:#ffb703;
  }
  #msg{
    position:fixed;
    left:50%;
    bottom:12px;
    transform:translateX(-50%);
    background:rgba(255,255,255,.95);
    padding:8px 14px;
    border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,.2);
    font-size:14px;
    max-width:90vw;
    text-align:center;
  }
</style>
</head>
<body>

<div id="controls">
  <button id="leftBtn">‚¨Ö Walk</button>
  <button id="stopBtn">‚è∏ Stop</button>
  <button id="rightBtn">Walk ‚û°</button>
  <button id="petBtn">‚ù§Ô∏è Pet</button>
  <button id="feedBtn">üçñ Feed</button>
</div>

<div id="msg">Walk to visit the 3 national parks!</div>

<canvas id="game"></canvas>

<script>
// ----------------------------------------
// BASIC SETUP
// ----------------------------------------
const canvas = document.getElementById("game");
const ctx    = canvas.getContext("2d");
const msgEl  = document.getElementById("msg");

function resize(){
  canvas.width  = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

function groundY(){ return canvas.height - 160; }

// This is the "visual" base height for the idle dog
const BASE_DOG_HEIGHT = 260;          
const WALK_FRAMES     = 5;
const IMG_BASE        = "assets/";

// Per-state extra zoom so small artwork (walk/sleep) can be enlarged
const STATE_SCALE = {
  idle:  1.0,
  walk:  1.4,   // make walking dog bigger
  eat:   1.0,
  paw:   1.0,
  sleep: 1.4    // make sleeping dog bigger too
};

// 3 national parks
const parks = [
  { name:"Yosemite",    subtitle:"Half Dome",         pos:0.25, visited:false },
  { name:"Yellowstone", subtitle:"Old Faithful",      pos:0.5,  visited:false },
  { name:"Acadia",      subtitle:"Cadillac Mountain", pos:0.75, visited:false }
];

// ----------------------------------------
// LOAD IMAGES
// ----------------------------------------
const images = {};
function load(key, file){
  const img = new Image();
  img.src = IMG_BASE + file;
  images[key] = img;
}

load("walk","dog_walk.png");   // 5-frame strip (tiny dog before)
load("idle","dog_idle.png");
load("eat","dog_eat.png");
load("paw","dog_paw.png");
load("sleep","dog_sleep.png");

// ----------------------------------------
// DOG STATE
// ----------------------------------------
const dog = {
  x: canvas.width * 0.15,
  y: groundY(),     // THIS is the baseline where paws touch
  dir: 1,
  speed: 6,
  anim: 0,
  state: "idle"     // "idle" | "walk" | "eat" | "paw" | "sleep"
};

let left  = false;
let right = false;

// ----------------------------------------
// CONTROLS
// ----------------------------------------
const leftBtn  = document.getElementById("leftBtn");
const rightBtn = document.getElementById("rightBtn");
const stopBtn  = document.getElementById("stopBtn");
const petBtn   = document.getElementById("petBtn");
const feedBtn  = document.getElementById("feedBtn");

function stopMoving(){
  left = right = false;
  dog.state = "idle";
}

leftBtn.onclick = function(){
  left  = true;
  right = false;
  dog.dir = -1;
  dog.state = "walk";
};

rightBtn.onclick = function(){
  right = true;
  left  = false;
  dog.dir = 1;
  dog.state = "walk";
};

stopBtn.onclick = stopMoving;

petBtn.onclick = function(){
  stopMoving();
  dog.state = "paw";
  showMsg("Your dog loves pets ‚ù§Ô∏è");
};

feedBtn.onclick = function(){
  stopMoving();
  dog.state = "eat";
  showMsg("Yum! Snack time üçñ");
};

window.addEventListener("keydown", function(e){
  if(e.key === "ArrowLeft")  leftBtn.onclick();
  if(e.key === "ArrowRight") rightBtn.onclick();
  if(e.key === " ")          stopBtn.onclick();
});

// ----------------------------------------
// MESSAGE HELPER
// ----------------------------------------
let msgTimer = 0;
function showMsg(text){
  msgEl.textContent = text;
  msgTimer = 180; // frames
}

// ----------------------------------------
// UPDATE
// ----------------------------------------
function update(){
  // keep baseline at ground every frame
  dog.y = groundY();

  if(dog.state === "walk"){
    if(left)  dog.x -= dog.speed;
    if(right) dog.x += dog.speed;
  }

  // clamp to screen
  if(dog.x < 40) dog.x = 40;
  if(dog.x > canvas.width - 40) dog.x = canvas.width - 40;

  dog.anim++;

  // stop at park signs
  const dogCenter = dog.x;
  for(let i=0;i<parks.length;i++){
    const p = parks[i];
    const parkX = p.pos * canvas.width;
    if(!p.visited && Math.abs(dogCenter - parkX) < 40 && dog.state === "walk"){
      stopMoving();
      p.visited = true;
      showMsg("You arrived at " + p.name + " ‚Äî " + p.subtitle + "!");
    }
  }

  // reset message
  if(msgTimer > 0){
    msgTimer--;
    if(msgTimer === 0){
      msgEl.textContent = "Walk to visit the 3 national parks!";
    }
  }
}

// ----------------------------------------
// DRAW HELPERS
// ----------------------------------------
function drawBackground(){
  ctx.fillStyle = "#bde0fe";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  const gy = groundY();
  ctx.fillStyle = "#90e0ef";
  ctx.fillRect(0, gy, canvas.width, canvas.height - gy);
}

function drawParks(){
  const gy = groundY();
  ctx.textBaseline = "middle";

  for(let i=0;i<parks.length;i++){
    const p = parks[i];
    const x = p.pos * canvas.width;
    const signTop = gy - 120;

    // pole
    ctx.fillStyle = "rgba(0,0,0,0.3)";
    ctx.fillRect(x - 4, signTop + 20, 8, 100);

    // sign
    ctx.fillStyle = "rgba(255,255,255,0.95)";
    ctx.fillRect(x - 80, signTop, 160, 40);

    ctx.fillStyle = "#000";
    ctx.font = "14px system-ui";
    ctx.fillText(p.name, x - 70, signTop + 10);
    ctx.font = "12px system-ui";
    ctx.fillText(p.subtitle, x - 70, signTop + 26);

    // visited dot
    ctx.fillStyle = p.visited ? "#2a9d8f" : "#e76f51";
    ctx.beginPath();
    ctx.arc(x + 64, signTop + 20, 6, 0, Math.PI*2);
    ctx.fill();
  }
}

// ----------------------------------------
// DRAW DOG (baseline + per-state scale)
// ----------------------------------------
function drawDog(){
  // pick which state to show
  let state = dog.state;
  if(!STATE_SCALE[state]) state = "idle";

  let img = images["idle"];
  let frames = 1;

  if(state === "walk"){
    img    = images["walk"];
    frames = WALK_FRAMES;
  } else if(state === "eat"){
    img = images["eat"] || images["idle"];
  } else if(state === "paw"){
    img = images["paw"] || images["idle"];
  } else if(state === "sleep"){
    img = images["sleep"] || images["idle"];
  }

  if(!img || !img.complete) return;

  const frameW = img.width / frames;
  const frameH = img.height;

  // base scale forces the IMAGE to be roughly BASE_DOG_HEIGHT tall,
  // then we multiply by STATE_SCALE to make small sprites larger.
  const baseScale = BASE_DOG_HEIGHT / frameH;
  const extra     = STATE_SCALE[state] || 1.0;
  const scale     = baseScale * extra;

  const drawW = frameW * scale;
  const drawH = frameH * scale;

  // which frame?
  let frameIndex = 0;
  if(frames > 1 && state === "walk"){
    frameIndex = Math.floor(dog.anim / 6) % frames;
  }

  const sx = frameIndex * frameW;
  const sy = 0;

  // dog.y is the GROUND LINE (paws), so image sits above that
  const dx = dog.x - drawW / 2;
  const dy = dog.y - drawH;

  ctx.save();
  if(dog.dir < 0){
    ctx.scale(-1,1);
    ctx.drawImage(
      img,
      sx, sy, frameW, frameH,
      -dx - drawW, dy,
      drawW, drawH
    );
  } else {
    ctx.drawImage(
      img,
      sx, sy, frameW, frameH,
      dx, dy,
      drawW, drawH
    );
  }
  ctx.restore();
}

// ----------------------------------------
// MAIN LOOP
// ----------------------------------------
function loop(){
  update();
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawBackground();
  drawParks();
  drawDog();
  requestAnimationFrame(loop);
}
loop();
</script>


</body>
</html>
